#
# Author: Siarhei Vasiliuk
#

.PHONY: all clean

all : conf comm

clean : clear_conf clear_comm

conf :
	$(MAKE) -C configuration

comm :
	$(MAKE) -C communication

clear_conf :
	$(MAKE) -C configuration clean

clear_comm :
	$(MAKE) -C communication clean

deploy:
	. ./_deploy.sh

help:
	@echo
	@echo "-----------------"
	@echo "Available trgets:"
	@echo "-----------------"
	@echo
	@echo "help         : show help"
	@echo
	@echo "all          : building application: configuration and communication"
	@echo "clean        : removing all files generated by 'all' target"
	@echo
	@echo "conf         : building application: configuration"
	@echo "clear_conf   : removing all files generated by 'configuration' target"
	@echo
	@echo "conf         : building application: communication"
	@echo "clear_conf   : removing all files generated by 'communication' target"
	@echo
	@echo "depoy        : running some user scipt with name _deploy.sh"
	@echo
	@echo "exapmle of using: make clean && make && make depoy"
	@echo "                  make clean && make"
	@echo
	@echo "-----------------"